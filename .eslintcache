[{"G:\\Projects\\react\\beequeen-reactjs\\src\\reportWebVitals.ts":"1","G:\\Projects\\react\\beequeen-reactjs\\src\\components\\HomePage.tsx":"2","G:\\Projects\\react\\beequeen-reactjs\\src\\components\\MainMenu.tsx":"3","G:\\Projects\\react\\beequeen-reactjs\\src\\index.tsx":"4","G:\\Projects\\react\\beequeen-reactjs\\src\\components\\AdministratorDashboard.tsx":"5","G:\\Projects\\react\\beequeen-reactjs\\src\\components\\AdministratorDashboardCategory.tsx":"6","G:\\Projects\\react\\beequeen-reactjs\\src\\firebase\\config.ts":"7","G:\\Projects\\react\\beequeen-reactjs\\src\\components\\AdministratorDashboardFeature.tsx":"8"},{"size":425,"mtime":1607105336096,"results":"9","hashOfConfig":"10"},{"size":333,"mtime":1608821785476,"results":"11","hashOfConfig":"10"},{"size":1953,"mtime":1608821654842,"results":"12","hashOfConfig":"10"},{"size":1383,"mtime":1608838327272,"results":"13","hashOfConfig":"10"},{"size":1150,"mtime":1608836351235,"results":"14","hashOfConfig":"10"},{"size":11229,"mtime":1608837642715,"results":"15","hashOfConfig":"10"},{"size":638,"mtime":1608822576962,"results":"16","hashOfConfig":"10"},{"size":8179,"mtime":1608839273417,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"155tds9",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32","usedDeprecatedRules":"29"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"G:\\Projects\\react\\beequeen-reactjs\\src\\reportWebVitals.ts",[],["37","38"],"G:\\Projects\\react\\beequeen-reactjs\\src\\components\\HomePage.tsx",[],"G:\\Projects\\react\\beequeen-reactjs\\src\\components\\MainMenu.tsx",[],"G:\\Projects\\react\\beequeen-reactjs\\src\\index.tsx",[],"G:\\Projects\\react\\beequeen-reactjs\\src\\components\\AdministratorDashboard.tsx",[],["39","40"],"G:\\Projects\\react\\beequeen-reactjs\\src\\components\\AdministratorDashboardCategory.tsx",["41"],"import React from 'react';\r\nimport { Container, Card, Table, Button, Modal, ModalBody, Form, Alert } from 'react-bootstrap';\r\nimport { faListAlt, faPlus, faEdit, faListUl, faBackward } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { Link } from 'react-router-dom';\r\nimport CategoryType from '../types/CategoryType';\r\nimport { projectFirestore, projectStorage } from '../firebase/config';\r\nimport MainMenu from './MainMenu';\r\n\r\ninterface AdministratorDashboardCategoryState {\r\n  isAdministratorLoggedIn: boolean;\r\n  categories: CategoryType[];\r\n\r\n  addModal: {\r\n    visible: boolean;\r\n    name: string;\r\n    parentCategoryId: string;\r\n    message: string;\r\n  };\r\n\r\n  editModal: {\r\n    categoryId?: string;\r\n    visible: boolean;\r\n    name: string;\r\n    parentCategoryId: string;\r\n    message: string;\r\n  };\r\n}\r\n\r\nclass AdministratorDashboardCategory extends React.Component {\r\n  state: AdministratorDashboardCategoryState;\r\n\r\n  constructor(props: Readonly<{}>) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isAdministratorLoggedIn: true,\r\n      categories: [],\r\n\r\n      addModal: {\r\n        visible: false,\r\n        name: '',\r\n        parentCategoryId: '',\r\n        message: '',\r\n      },\r\n\r\n      editModal: {\r\n        visible: false,\r\n        name: '',\r\n        parentCategoryId: '',\r\n        message: '',\r\n      }\r\n    };\r\n  }\r\n\r\n  private setAddModalVisibleState(newState: boolean) {\r\n    this.setState(Object.assign(this.state, \r\n      Object.assign(this.state.addModal, {\r\n        visible: newState,\r\n      })\r\n    ));\r\n  }\r\n\r\n  private setAddModalStringFieldState(fieldName: string, newValue: string) {\r\n    this.setState(Object.assign(this.state, \r\n      Object.assign(this.state.addModal, {\r\n        [ fieldName ]: newValue,\r\n      })\r\n    ));\r\n  }\r\n\r\n  private setEditModalVisibleState(newState: boolean) {\r\n    this.setState(Object.assign(this.state, \r\n      Object.assign(this.state.editModal, {\r\n        visible: newState,\r\n      })\r\n    ));\r\n  }\r\n\r\n  private setEditModalStringFieldState(fieldName: string, newValue: string) {\r\n    this.setState(Object.assign(this.state, \r\n      Object.assign(this.state.editModal, {\r\n        [ fieldName ]: newValue,\r\n      })\r\n    ));\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getCategories();\r\n  }\r\n\r\n  private getCategories() {\r\n    projectFirestore.collection(\"categories\").get().then((querySnapshot) => {\r\n      let documents: CategoryType[] = [];\r\n      querySnapshot.forEach(doc => {\r\n        documents.push({...doc.data(), categoryId: doc.id});\r\n      });\r\n\r\n      this.putCategoriesInState(documents);\r\n    });\r\n  }\r\n\r\n  private putCategoriesInState(data: CategoryType[]) {\r\n\r\n    this.setState(Object.assign(this.state, {\r\n      categories: data,\r\n    }));\r\n  }\r\n\r\n  private setLogginState(isLoggedIn: boolean) {\r\n    this.setState(Object.assign(this.state, {\r\n      isAdministratorLoggedIn: isLoggedIn,\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Container>\r\n        <MainMenu role='administrator' />\r\n\r\n        <Card>\r\n          <Card.Header className=\"bg-warning\">\r\n            <Card.Title>\r\n            <FontAwesomeIcon icon={ faListAlt } /> Kategorije\r\n            </Card.Title>\r\n          </Card.Header>\r\n\r\n          <Card.Body>\r\n\r\n            <Table hover size=\"sm\" bordered>\r\n              <thead>\r\n                <tr>\r\n                <th colSpan={ 3 }>\r\n                    <Link to=\"/administrator/dashboard/\"\r\n                          className=\"btn btn-sm btn-warning\">\r\n                      <FontAwesomeIcon icon={ faBackward } /> Back to dashboard\r\n                    </Link>\r\n                  </th>\r\n                  <th className=\"text-center\">\r\n                    <Button variant=\"warning\" size=\"sm\"\r\n                            onClick={ () => this.showAddModal() }>\r\n                      <FontAwesomeIcon icon={ faPlus } /> Add\r\n                    </Button>\r\n                  </th>\r\n                </tr>\r\n                <tr>\r\n                  <th className=\"text-right\">ID</th>\r\n                  <th>Name</th>\r\n                  <th className=\"text-right\">Parent ID</th>\r\n                  <th></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                { this.state.categories.map(category => (\r\n                  <tr>\r\n                    <td className=\"text-right\">{ category.categoryId }</td>\r\n                    <td>{ category.name }</td>\r\n                    <td className=\"text-right\">{ category.parentCategoryId }</td>\r\n                    <td className=\"text-center\">\r\n                      <Link to={ \"/administrator/dashboard/feature/\" + category.categoryId }\r\n                            className=\"btn btn-sm btn-warning mr-2\">\r\n                        <FontAwesomeIcon icon={ faListUl } /> Features\r\n                      </Link>\r\n\r\n                      <Button variant=\"warning\" size=\"sm\"\r\n                              onClick={ () => this.showEditModal(category) }>\r\n                        <FontAwesomeIcon icon={ faEdit } /> Edit\r\n                      </Button>\r\n                    </td>\r\n                  </tr>\r\n                ), this) }\r\n              </tbody>\r\n            </Table>\r\n          </Card.Body>\r\n        </Card>\r\n\r\n        <Modal size=\"lg\" centered show={ this.state.addModal.visible } onHide={ () => this.setAddModalVisibleState(false) }>\r\n          <Modal.Header closeButton  className=\"bg-warning\">\r\n            <Modal.Title>Add new category</Modal.Title>\r\n          </Modal.Header>\r\n          <ModalBody>\r\n            <Form.Group>\r\n              <Form.Label htmlFor=\"name\">Name</Form.Label>\r\n              <Form.Control id=\"name\" type=\"text\" value={ this.state.addModal.name }\r\n                      onChange={ (e) => this.setAddModalStringFieldState('name', e.target.value) } />\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <Form.Label htmlFor=\"add-photo\">Article photo</Form.Label>\r\n              <Form.File id=\"add-photo\" />\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <Form.Label htmlFor=\"parentCategoryId\">Parent category</Form.Label>\r\n              <Form.Control id=\"parentCategoryId\" as=\"select\" value={ this.state.addModal.parentCategoryId }\r\n                            onChange={ (e) => this.setAddModalStringFieldState('parentCategoryId', e.target.value) }>\r\n                <option value=\"null\">No parent category</option>\r\n                { this.state.categories.map(category => (\r\n                  <option value={ category.categoryId }>\r\n                    { category.name }\r\n                  </option>\r\n                )) }\r\n              </Form.Control>\r\n            </Form.Group>\r\n            { this.state.addModal.message ? (\r\n              <Alert variant=\"danger\" value={ this.state.addModal.message } />\r\n            ) : '' }\r\n            <Form.Group>\r\n              <Button variant=\"warning\" onClick={ () => this.doAddCategory() }>\r\n                <FontAwesomeIcon icon={ faPlus } /> Add new category\r\n              </Button>\r\n            </Form.Group>\r\n          </ModalBody>\r\n        </Modal>\r\n\r\n        <Modal size=\"lg\" centered show={ this.state.editModal.visible } onHide={ () => this.setEditModalVisibleState(false) }>\r\n          <Modal.Header closeButton  className=\"bg-warning\">\r\n            <Modal.Title>Edit category</Modal.Title>\r\n          </Modal.Header>\r\n          <ModalBody>\r\n            <Form.Group>\r\n              <Form.Label htmlFor=\"name\">Name</Form.Label>\r\n              <Form.Control id=\"name\" type=\"text\" value={ this.state.editModal.name }\r\n                      onChange={ (e) => this.setEditModalStringFieldState('name', e.target.value) } />\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <Form.Label htmlFor=\"parentCategoryId\">Parent category</Form.Label>\r\n              <Form.Control id=\"parentCategoryId\" as=\"select\" value={ this.state.editModal.parentCategoryId }\r\n                            onChange={ (e) => this.setEditModalStringFieldState('parentCategoryId', e.target.value) }>\r\n                <option value=\"null\">No parent category</option>\r\n                { this.state.categories\r\n                      .filter(category => category.categoryId !== this.state.editModal.categoryId)\r\n                      .map(category => (\r\n                  <option value={ category.categoryId }>\r\n                    { category.name }\r\n                  </option>\r\n                )) }\r\n              </Form.Control>\r\n            </Form.Group>\r\n            { this.state.editModal.message ? (\r\n              <Alert variant=\"danger\" value={ this.state.editModal.message } />\r\n            ) : '' }\r\n            <Form.Group>\r\n              <Button variant=\"warning\" onClick={ () => this.doEditCategory() }>\r\n                <FontAwesomeIcon icon={ faEdit } /> Edit category\r\n              </Button>\r\n            </Form.Group>\r\n          </ModalBody>\r\n        </Modal>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  private showAddModal() {\r\n    this.setAddModalStringFieldState('name', '');\r\n    this.setAddModalStringFieldState('imagePath', '');\r\n    this.setAddModalStringFieldState('parentCategoryId', '');\r\n    this.setAddModalStringFieldState('message', '');\r\n    this.setAddModalVisibleState(true);\r\n  }\r\n\r\n  private doAddCategory() {\r\n    const types = ['image/png', 'image/jpeg'];\r\n    let filePicker: any = document.getElementById('add-photo');\r\n    const selectedFile = filePicker.files[0];\r\n    let file: any = null;\r\n    \r\n    if (selectedFile && types.includes(selectedFile.type)) {\r\n      file = selectedFile;\r\n      this.setAddModalStringFieldState('message', '');\r\n    } else {\r\n      this.setAddModalStringFieldState('message', 'Please select an image file (png or jpg)!');\r\n      filePicker.value = '';\r\n    }\r\n\r\n    const storageRef = projectStorage.ref(file.name);\r\n    const collectionRef = projectFirestore.collection('categories');\r\n\r\n    storageRef.put(file).on('state_changed', (snap) => {\r\n      let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n    }, (err) => {\r\n\r\n    }, async () => {\r\n      const url = await storageRef.getDownloadURL();\r\n      const collectionData = {\r\n        name: this.state.addModal.name,\r\n        parentCategoryId: this.state.addModal.parentCategoryId,\r\n        imageUrl: url\r\n      };\r\n      await collectionRef.add(collectionData);\r\n\r\n      this.setAddModalVisibleState(false);\r\n      this.getCategories();\r\n    });\r\n  }\r\n\r\n  private showEditModal(category: CategoryType) {\r\n    this.setEditModalStringFieldState('name', String(category.name));\r\n    this.setEditModalStringFieldState('parentCategoryId', String(category.parentCategoryId));\r\n    this.setEditModalStringFieldState('categoryId', String(category.categoryId));\r\n    this.setEditModalStringFieldState('message', '');\r\n    this.setEditModalVisibleState(true);\r\n  }\r\n\r\n  private doEditCategory() {\r\n    projectFirestore.collection(\"categories\").doc(this.state.editModal.categoryId).update({\r\n      name: this.state.editModal.name,\r\n      parentCategoryId: this.state.editModal.parentCategoryId,\r\n    });\r\n\r\n    this.setEditModalVisibleState(false);\r\n    this.getCategories();\r\n    \r\n  }\r\n}\r\n\r\nexport default AdministratorDashboardCategory;\r\n","G:\\Projects\\react\\beequeen-reactjs\\src\\firebase\\config.ts",[],"G:\\Projects\\react\\beequeen-reactjs\\src\\components\\AdministratorDashboardFeature.tsx",[],{"ruleId":"42","replacedBy":"43"},{"ruleId":"44","replacedBy":"45"},{"ruleId":"42","replacedBy":"46"},{"ruleId":"44","replacedBy":"47"},{"ruleId":"48","severity":1,"message":"49","line":278,"column":11,"nodeType":"50","messageId":"51","endLine":278,"endColumn":21},"no-native-reassign",["52"],"no-negated-in-lhs",["53"],["52"],["53"],"@typescript-eslint/no-unused-vars","'percentage' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]